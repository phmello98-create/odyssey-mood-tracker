If youâ€™re building a Flutter app and want to integrate Firebase Cloud Messaging (FCM) for push notifications, youâ€™re in the right place. This guide walks you through the process of setting up Firebase notifications in your Flutter project, covering everything from initial configuration to testing notifications.
Prerequisites

Before diving in, ensure you have:

    A Firebase account
    Basic knowledge of Flutter and Dart
    Flutter installed and configured on your machine

Step 1: Create and Configure Your Firebase Project
1.1 Create a Firebase Project

    Go to the Firebase Console.
    Click on Add Project.
    Follow the setup wizard to create a new Firebase project.

1.2 Add Firebase to Your App
For iOS:

    In the Firebase console, select your project.
    Click on the iOS icon to add an iOS app.
    Register your app with your iOS bundle ID.
    Download the GoogleService-Info.plist file.
    Open your iOS project in Xcode and drag the GoogleService-Info.plist file into the project navigator.

For Android:

    Click on the Android icon in the Firebase console to add an Android app.
    Register your app with your Android package name.
    Download the google-services.json file.
    Place the google-services.json file into the android/app directory of your Flutter project.

1.3 Enable Firebase Cloud Messaging (FCM)

    In the Firebase console, go to Project Settings.
    Click on the Cloud Messaging tab.
    Note down the Server Key and Sender ID; youâ€™ll need these for sending notifications from your server.

Step 2: Configure Your Flutter Project
2.1 Add Firebase Dependencies

Update your pubspec.yaml file to include Firebase dependencies:

dependencies:
  flutter:
    sdk: flutter
  firebase_core: latest_version
  firebase_messaging: latest_version

Replace latest_version with the current versions from pub.dev. Run flutter pub get to install these packages.
2.2 Initialize Firebase

Modify your main.dart file to initialize Firebase:Co code

import 'package:firebase_core/firebase_core.dart';
import 'package:flutter/material.dart';

void main() async {
  WidgetsFlutterBinding.ensureInitialized();
  await Firebase.initializeApp();
  runApp(MyApp());
}
class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      home: Scaffold(
        appBar: AppBar(title: Text('Firebase Notifications')),
        body: Center(child: Text('Hello World')),
      ),
    );
  }
}

2.3 Set Up Firebase Messaging

Configure Firebase Messaging in main.dart:

import 'package:firebase_messaging/firebase_messaging.dart';
import 'package:flutter/material.dart';


Future<void> _backgroundHandler(RemoteMessage message) async {
  // Handle background message
}
void main() async {
  WidgetsFlutterBinding.ensureInitialized();
  await Firebase.initializeApp();
  FirebaseMessaging.onBackgroundMessage(_backgroundHandler);
  runApp(MyApp());
}
class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      home: Scaffold(
        appBar: AppBar(title: Text('Firebase Notifications')),
        body: NotificationWidget(),
      ),
    );
  }
}
class NotificationWidget extends StatefulWidget {
  @override
  _NotificationWidgetState createState() => _NotificationWidgetState();
}
class _NotificationWidgetState extends State<NotificationWidget> {
  final FirebaseMessaging _firebaseMessaging = FirebaseMessaging.instance;
  @override
  void initState() {
    super.initState();
    _firebaseMessaging.requestPermission();
    FirebaseMessaging.onMessage.listen((RemoteMessage message) {
      print('Message data: ${message.data}');
      if (message.notification != null) {
        print('Message also contained a notification: ${message.notification}');
      }
    });
    FirebaseMessaging.onMessageOpenedApp.listen((RemoteMessage message) {
      print('Message clicked! ${message.messageId}');
    });
  }
  @override
  Widget build(BuildContext context) {
    return Center(
      child: Text('Waiting for messages'),
    );
  }
}

Unlock your mobile development potential with our YouTube channel! ðŸ“±âœ¨ Explore in-depth tutorials and expert tips on Java, Kotlin, Flutter, Swift, React Native, and more. Whether youâ€™re just starting or looking to advance your skills, weâ€™ve got the resources you need. Subscribe now and never miss a moment of learning! ðŸŒŸðŸš€ Check us out here: Code-Wid-AP
Step 3: Configure Platform-Specific Settings
For iOS

    Add Required Capabilities:

    Open your iOS project in Xcode.
    Go to Signing & Capabilities and enable Push Notifications and Background Modes with Remote notifications.

    Update Info.plist: Add the following to ios/Runner/Info.plist:

<key>UIBackgroundModes</key>
 <array>  
 <string>fetch</string> 
  <string>remote-notification</string>
 </array>

For Android

    Update android/build.gradle: Add the Google services classpath:

classpath 'com.google.gms:google-services:4.3.15'

2. Update android/app/build.gradle: Apply the Google services plugin:

apply plugin: 'com.google.gms.google-services'

3. Add Required Permissions: Ensure your AndroidManifest.xml includes the necessary permissions:

<uses-permission android:name="android.permission.INTERNET"/>
 <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>
 <uses-permission android:name="android.permission.VIBRATE"/>
 <uses-permission android:name="android.permission.WAKE_LOCK"/>

Step 4: Test Your Setup

To verify that notifications are working:

    Go to the Cloud Messaging section in the Firebase Console.
    Click Send your first message.
    Enter your message details and send it to your device.
